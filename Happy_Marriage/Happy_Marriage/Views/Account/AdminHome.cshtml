@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    
}

<div class="container-fluid p-5">
@section Scripts{
    <script>
        $().ready(() => {
            $("#AllUsers").click(
            function AllUsers() {
                $.ajax({
                    type: "GET",

                    url: "/Api/AllUsers/",
                    datatype: "json",
                    success: (result) => {
                                var str = `<table class="table">
                                            <tr> <th>User Name </th><th> Approval Status </th> <th>Visit Profile</th></tr>
                                           `;
                        console.log(result);
                        for(var x in result.value) {
                            str += `
                                    <tr>
                                        <td> `+ result.value[x].userName + ` </td>
                                        <td> `+ result.value[x].approvalStatus + ` </td>
                                        <td>
                                            <form>
                                                <input type="hidden" id="userid" name="userid" value=`+ result.value[x].userId + ` />
                                                <button class="btn btn-info btn-block" formaction="/ProfilePage/OthersProfile/" formmethod="post" > Visit Profile </button>
                                            </form>
                                        </td>
                                    </tr>`
                            
                        }
                        str += "</table>"
                        document.getElementById("userlst").innerHTML = str;
                    },
                    error: (req, status, error) => {
                        console.log("AN ERROR OCCURED WITH AJAX");
                    }
                });
            });

            $("#PendingForApproval").click(
            function PendingForApproval(){
                $.ajax({
                    type: "GET",

                    url: "/Api/PendingForApprovalUsers/",
                    datatype: "json",
                    success: (result) => {
                        var str = `<table class="table">
                                    <tr><th>User Name</th><th>Approval Status</th><th>Visit Profile</th><th>Accept</th><th>Reject</th></tr>`;
                        console.log(result);
                        for (var x in result.value) {
                            str += `
                            <tr>
                                <td> `+ result.value[x].userName + `</td>
                                <td> `+ result.value[x].approvalStatus + `</td>
                                <td>
                                    <form>
                                        <input type="hidden" id="userid" name="userid" value=`+ result.value[x].userId + ` />
                                        <button class="btn btn-info btn-block" formaction="/ProfilePage/OthersProfile/" formmethod = "post" > Visit Profile </button>
                                    </form>
                                </td>
                                <td>
                                    <form>
                                        <input type="hidden" id="userid" name="userid" value=`+result.value[x].userId+` />
                                        <button class="btn btn-success btn-block" formaction="/Account/AcceptAccount/" formmethod = "post" > Accept </button>
                                    </form>
                                </td>
                                <td>
                                    <form>
                                        <input type="hidden" id="userid" name="userid" value=`+ result.value[x].userId + ` />
                                        <button class="btn btn-danger btn-block" formaction="/Account/RejectAccount/" formmethod = "post" > Reject </button>
                                    </form>
                                </td>
                                
                            </tr>`
                        }
                        str += "</table>"
                        document.getElementById("userlst").innerHTML = str;
                    },
                    error: (req, status, error) => {
                        console.log("AN ERROR OCCURED WITH AJAX");
                    }
                });
            });

            $("#RejectedUsers").click(
            function RejectedUsers(){
                $.ajax({
                    type: "GET",

                    url: "/Api/RejectedUsers/",
                    datatype: "json",
                    success: (result) => {
                        var str = `<table class="table">
                                   <tr><th>User Name</th><th>Approval Status</th><th>Visit Profile</th></tr>`;
                        console.log(result);
                        for (var x in result.value) {
                            str += `
                            <tr>
                                <td>`+result.value[x].userName+`</td>
                                <td> `+result.value[x].approvalStatus+`</td>
                                <td>
                                    <form>
                                        <input type="hidden" id="userid" name="userid" value=`+ result.value[x].userId + ` />
                                        <button class="btn btn-info btn-block" formaction="/ProfilePage/OthersProfile/" formmethod = "post" > Visit Profile </button>
                                    </form>
                                </td>
                            </tr>
                            `
                        }
                        str += "</table>"
                        document.getElementById("userlst").innerHTML = str;
                    },
                    error: (req, status, error) => {
                        console.log("AN ERROR OCCURED WITH AJAX");
                    }
                });
            });

            $("#BannedUsers").click(
            function BannedUsers(){
                $.ajax({
                    type: "GET",

                    url: "/Api/BannedUsers/",
                    datatype: "json",
                    success: (result) => {
                        var str = `<table class=table>
                                               <tr><th>User Name</th><th>Approval Status</th><th>Visit Profile</th><th>Uplift Ban</th></tr>`;
                        console.log(result);
                        for (var x in result.value) {
                            str += `
                            <tr>
                                <td> `+result.value[x].userName+`</td>
                                <td> `+result.value[x].approvalStatus+` </td>
                                <td>
                                    <form>
                                        <input type="hidden" id="userid" name="userid" value=`+ result.value[x].userId + ` />
                                        <button class="btn btn-info btn-block" formaction="/ProfilePage/OthersProfile/" formmethod = "post" > Visit Profile </button>
                                    </form>
                                </td>
                                <td>
                                    <form>
                                        <input type="hidden" id="userid" name="userid" value=`+ result.value[x].userId + ` />
                                        <button class="btn btn-warning btn-block" formaction="/Account/UpliftBan/" formmethod = "post" > Uplift Ban </button>
                                    </form>    
                                </td>
                            </tr>
                            `
                        }
                        str += "</table>"
                        document.getElementById("userlst").innerHTML = str;
                    },
                    error: (req, status, error) => {
                        console.log("AN ERROR OCCURED WITH AJAX");
                    }
                });
            });
        })   
        
        

    </script>
}
    <div class="row flex-nowrap">
        <div class="col col-lg-4">
            <div class="row">
                
                <button class="btn btn-dark btn-lg btn-block" id="AllUsers">All Users</button>

            </div>
            <div class="row">

                <button class="btn btn-dark btn-lg btn-block" id="PendingForApproval">Pending For Approval</button>

            </div>
            <div class="row">

                <button class="btn btn-dark btn-lg btn-block" id="RejectedUsers">Rejected Users</button>

            </div>
            <div class="row">

                <button class="btn btn-dark btn-lg btn-block" id="BannedUsers">Banned Users</button>

            </div>
        </div>
        <div class="col col-lg-8">

            <div class="container" id="userlst">

            </div>


        </div>
    </div>
</div>